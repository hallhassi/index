<html>
    <head>
        <base target="_blank">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            body {
                background: red;
            }

            main {
                margin: 80vh 0 20vh 0;
            }

            #canvaswrapper {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                display: flex;
                align-items: baseline;
                justify-content: center;
                cursor: pointer;
            }

            #canvaswrapper[hidden] {
                display: none;
            }

            canvas {
                object-fit: contain;
                max-height: 100vh;
                max-width: 100vw;
                box-shadow: 0 0 0 1px red;
            }

            img {
                max-height: 12vw;
            }

            @media (max-width: 767px) {
                img {
                    max-height: 24vw;
                }
            }

            .on {
                opacity: .5;
            }
        </style>
    </head>
    <body>
        <main>
            <a id="next" href="index2.html" target="_self"><</a>
            <a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_1940.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_1940.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_1965.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_1965.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2092.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2092.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2280.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2280.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2360.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2360.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2366.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2366.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2399.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2399.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2621.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2621.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2820.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2820.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2823.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2823.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2849.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2849.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2852.JPEG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2852.JPEG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2855.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2855.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2886.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2886.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2894.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2894.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2911.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2911.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_2941.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_2941.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3067.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3067.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3113.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3113.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3158.JPEG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3158.JPEG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3211.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3211.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3212.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3212.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3213.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3213.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3214.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3214.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3215.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3215.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3216.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3216.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3217.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3217.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3218.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3218.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3219.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3219.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3220.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3220.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3221.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3221.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3222.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3222.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3223.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3223.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3224.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3224.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3225.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3225.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3226.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3226.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3227.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3227.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3434.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3434.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3457.JPEG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3457.JPEG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3464.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3464.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3480.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3480.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3484.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3484.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3486.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3486.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3589.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3589.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3814.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3814.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3821.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3821.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3836.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3836.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3841.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3841.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3864.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3864.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3869.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3869.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3892.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3892.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_3963.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_3963.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4077.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4077.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4079.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4079.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4083.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4083.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4129.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4129.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4138.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4138.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4139.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4139.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4140.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4140.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4141.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4141.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4142.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4142.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4225.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4225.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4227.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4227.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4269.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4269.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4329.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4329.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4343.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4343.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4361.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4361.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4372.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4372.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4384.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4384.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4396.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4396.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4397.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4397.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4398.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4398.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4399.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4399.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4405.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4405.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4410.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4410.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4414.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4414.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4480.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4480.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4485.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4485.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4487.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4487.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4496.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4496.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4499.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4499.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4501.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4501.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4513.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4513.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4514.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4514.JPG"></a><a onclick="return false;" href="https://blaiselarmee.mo.cloudinary.net/auto/new/IMG_4518.JPG"><img src="https://blaiselarmee.mo.cloudinary.net/800/new/IMG_4518.JPG"></a>
        </main>
        <div id="canvaswrapper"><a><canvas id="canvas" width="0" height="0"></canvas></a></div>
        <script>
let img = Array.from(document.querySelectorAll('img'));
let i, y // current index of images, height of document body

window.addEventListener('scroll', handleScroll, { passive: true });
window.addEventListener('touchmove', zoomIn)
window.addEventListener('wheel', zoomIn)

// click image
img.forEach((el, index) => {
    el.addEventListener('click', (e) => {
        img[i].classList.add('on')
        canvaswrapper.hidden = false
        scrollTo(0, y * index / img.length)
    })
})

// hide canvas
canvaswrapper.addEventListener('click', (e) => {
    if (e.target !== canvas) {
        canvaswrapper.hidden = true
        img.forEach(el => el.classList.remove('on'))
    }
})

// scroll
function handleScroll() {
    img = Array.from(document.querySelectorAll('img'));
    img.forEach(el => el.classList.remove('on'))
    if (!canvaswrapper.hidden) { // if canvas is visible
        i = Math.min(Math.round(window.scrollY * img.length / y), img.length - 1);
        y = document.body.getBoundingClientRect().height
        requestAnimationFrame(() => {
            canvas.width = img[i].naturalWidth;
            canvas.height = img[i].naturalHeight;
            canvas.getContext("2d").drawImage(img[i], 0, 0, img[i].naturalWidth, img[i].naturalHeight);
            img[i].classList.add('on')
            canvas.parentElement.href = img[i].parentElement.href
        })
    }
}

// zoom in
function zoomIn() {
    if (window.visualViewport.scale > 1 && !canvaswrapper.hidden) {
        let hiRes = new Image()
        hiRes.src = img[i].src.replace('blaiselarmee.mo.cloudinary.net/800', 'raw.githubusercontent.com/hallhassi/index/main')
        hiRes.onload = function () {
            const h = canvas.height
            const w = canvas.width
            if (w < document.body.getBoundingClientRect().width) canvas.style.height = h
            if (h < document.body.getBoundingClientRect().height) canvas.style.width = w
            canvas.width = hiRes.naturalWidth
            canvas.height = hiRes.naturalHeight
            canvas.getContext("2d").drawImage(hiRes, 0, 0, hiRes.naturalWidth, hiRes.naturalHeight)
        }
        window.removeEventListener('scroll', handleScroll)
        window.removeEventListener('touchmove', zoomIn)
        window.removeEventListener('wheel', zoomIn);
        window.addEventListener('touchmove', zoomOut)
        window.addEventListener('wheel', zoomOut)
    }
}

// zoom out (reset)
function zoomOut() {
    if (window.visualViewport.scale === 1) {
        canvas.width = img[i].naturalWidth;
        canvas.height = img[i].naturalHeight;
        canvas.style.height = ''
        canvas.style.width = ''
        canvas.getContext("2d").drawImage(img[i], 0, 0, img[i].naturalWidth, img[i].naturalHeight);
        window.addEventListener('scroll', handleScroll, { passive: true });
        window.addEventListener('touchmove', zoomIn)
        window.addEventListener('wheel', zoomIn)
        window.removeEventListener('touchmove', zoomOut)
    }
}

// keydown
window.addEventListener('keydown', (e) => {
    if (e.key == 'ArrowRight') scrollBy(0, y / img.length)
    else if (e.key == 'ArrowLeft') scrollBy(0, -y / img.length)
    else if (e.key == 'Escape') canvaswrapper.hidden = canvaswrapper.hidden == true ? false : true
})
        </script>
    </body>
</html>